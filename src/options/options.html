<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Universal Request Analyzer - Config</title>
  <link rel="stylesheet" href="../assets/fontawesome/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="/css/themes.css">
  <link rel="stylesheet" href="css/options.css">
  <link rel="stylesheet" href="css/data-purge.css">
</head>

<body>
  <div id="app">
    <header class="header">
      <h1>Universal Request Analyzer Settings</h1>
    </header>

    <nav class="nav-tabs">
      <button class="tab-button active" data-tab="dashboard">
        <i class="fas fa-chart-line"></i> Dashboard
      </button>
      <button class="tab-button" data-tab="general">
        <i class="fas fa-cog"></i> General
      </button>
      <button class="tab-button" data-tab="monitoring">
        <i class="fas fa-chart-bar"></i> Monitoring
      </button>
      <button class="tab-button" data-tab="filters">
        <i class="fas fa-filter"></i> Filters
      </button>
      <button class="tab-button" data-tab="export">
        <i class="fas fa-file-export"></i> Export
      </button>
      <button class="tab-button" data-tab="retention">
        <i class="fas fa-database"></i> Data Retention
      </button>
      <button class="tab-button" data-tab="security">
        <i class="fas fa-shield-alt"></i> Security
      </button>
      <button class="tab-button" data-tab="themes">
        <i class="fas fa-palette"></i> Themes
      </button>
    </nav>

    <main class="main-content">
      <!-- Dashboard Tab -->
      <section id="dashboard" class="tab-content active">
        <div class="dashboard-container">
          <div class="dashboard-header">
            <h2><i class="fas fa-tachometer-alt"></i> Performance Dashboard</h2>
            <div class="dashboard-controls">
              <select id="dashboardTimeRange">
                <option value="3600">Last Hour</option>
                <option value="21600">Last 6 Hours</option>
                <option value="86400" selected>Last 24 Hours</option>
                <option value="604800">Last 7 Days</option>
              </select>
              <button id="dashboardRefresh" class="btn-primary">
                <i class="fas fa-sync-alt"></i> Refresh
              </button>
            </div>
          </div>

          <!-- Key Metrics Cards -->
          <div class="metrics-grid">
            <div class="metric-card">
              <div class="metric-icon" style="background: #4CAF50;">
                <i class="fas fa-network-wired"></i>
              </div>
              <div class="metric-content">
                <div class="metric-label">Total Requests</div>
                <div class="metric-value" id="dashTotalRequests">0</div>
                <div class="metric-change positive" id="dashTotalChange">+0%</div>
              </div>
            </div>

            <div class="metric-card">
              <div class="metric-icon" style="background: #2196F3;">
                <i class="fas fa-clock"></i>
              </div>
              <div class="metric-content">
                <div class="metric-label">Avg Response Time</div>
                <div class="metric-value" id="dashAvgResponse">0ms</div>
                <div class="metric-change" id="dashAvgChange">+0%</div>
              </div>
            </div>

            <div class="metric-card">
              <div class="metric-icon" style="background: #FF9800;">
                <i class="fas fa-exclamation-triangle"></i>
              </div>
              <div class="metric-content">
                <div class="metric-label">Slow Requests</div>
                <div class="metric-value" id="dashSlowRequests">0</div>
                <div class="metric-change" id="dashSlowChange">+0%</div>
              </div>
            </div>

            <div class="metric-card">
              <div class="metric-icon" style="background: #f44336;">
                <i class="fas fa-times-circle"></i>
              </div>
              <div class="metric-content">
                <div class="metric-label">Error Rate</div>
                <div class="metric-value" id="dashErrorRate">0%</div>
                <div class="metric-change" id="dashErrorChange">+0%</div>
              </div>
            </div>
          </div>

          <!-- Charts Section -->
          <div class="dashboard-charts">
            <div class="chart-section">
              <h3><i class="fas fa-chart-line"></i> Request Volume Over Time</h3>
              <canvas id="dashboardVolumeChart"></canvas>
            </div>

            <div class="chart-row">
              <div class="chart-section half">
                <h3><i class="fas fa-chart-pie"></i> Status Distribution</h3>
                <canvas id="dashboardStatusChart"></canvas>
              </div>

              <div class="chart-section half">
                <h3><i class="fas fa-chart-bar"></i> Top Domains</h3>
                <canvas id="dashboardDomainsChart"></canvas>
              </div>
            </div>

            <div class="chart-section">
              <h3><i class="fas fa-chart-area"></i> Performance Trends</h3>
              <canvas id="dashboardPerformanceChart"></canvas>
            </div>
          </div>

          <!-- Data Layer Status -->
          <div class="data-layer-status">
            <h3><i class="fas fa-layer-group"></i> Medallion Architecture Status</h3>
            <div class="layer-cards">
              <div class="layer-card bronze">
                <div class="layer-name">Bronze Layer</div>
                <div class="layer-count" id="bronzeCount">0</div>
                <div class="layer-desc">Raw requests</div>
              </div>
              <div class="layer-card silver">
                <div class="layer-name">Silver Layer</div>
                <div class="layer-count" id="silverCount">0</div>
                <div class="layer-desc">Processed requests</div>
              </div>
              <div class="layer-card gold">
                <div class="layer-name">Gold Layer</div>
                <div class="layer-count" id="goldCount">0</div>
                <div class="layer-desc">Analytics</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- General Settings Tab -->
      <section id="general" class="tab-content">
        <div class="options-container">
          <div class="option-section">
            <h2>Capture Settings</h2>
            <div class="option-row">
              <label>
                <input type="checkbox" id="captureEnabled">
                Enable Request Capture
              </label>
            </div>
            <div class="option-row">
              <label for="maxStoredRequests">Maximum Stored Requests:</label>
              <input type="number" id="maxStoredRequests" min="100" max="100000" step="100">
            </div>
          </div>
        </div>
      </section>

      <!-- Monitoring Settings Tab -->
      <section id="monitoring" class="tab-content">
        <div class="options-container">
          <div class="option-section">
            <h2>Visualization</h2>
            <div class="option-row">
              <label>
                <input type="checkbox" id="plotEnabled">
                Enable Plots
              </label>
            </div>
            <div class="option-row">
              <label>Plot Types:</label>
              <div class="checkbox-group">
                <label class="checkbox-label">
                  <input type="checkbox" name="plotType" value="responseTime"> Response Time
                </label>
                <label class="checkbox-label">
                  <input type="checkbox" name="plotType" value="statusCodes"> Status Codes
                </label>
                <label class="checkbox-label">
                  <input type="checkbox" name="plotType" value="domains"> Domains
                </label>
                <label class="checkbox-label">
                  <input type="checkbox" name="plotType" value="requestTypes"> Request Types
                </label>
                <label class="checkbox-label">
                  <input type="checkbox" name="plotType" value="timeDistribution"> Time Distribution
                </label>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Filters Settings Tab -->
      <section id="filters" class="tab-content">
        <div class="options-container">
          <div class="option-section">
            <h2>Capture Filters</h2>
            <div class="option-row">
              <label>Request Types to Capture:</label>
              <div class="checkbox-group">
                <label class="checkbox-label">
                  <input type="checkbox" name="captureType" value="xmlhttprequest"> XHR
                </label>
                <label class="checkbox-label">
                  <input type="checkbox" name="captureType" value="fetch"> Fetch
                </label>
                <label class="checkbox-label">
                  <input type="checkbox" name="captureType" value="script"> Script
                </label>
                <label class="checkbox-label">
                  <input type="checkbox" name="captureType" value="stylesheet"> Stylesheet
                </label>
                <label class="checkbox-label">
                  <input type="checkbox" name="captureType" value="image"> Image
                </label>
                <label class="checkbox-label">
                  <input type="checkbox" name="captureType" value="font"> Font
                </label>
                <label class="checkbox-label">
                  <input type="checkbox" name="captureType" value="other"> Other
                </label>
              </div>
            </div>
            <div class="option-row">
              <label for="includeDomains">Include Domains (comma separated):</label>
              <input type="text" id="includeDomains" placeholder="Leave empty to include all">
            </div>
            <div class="option-row">
              <label for="excludeDomains">Exclude Domains (comma separated):</label>
              <input type="text" id="excludeDomains" placeholder="Leave empty to exclude none">
            </div>
          </div>
        </div>
      </section>

      <!-- Export Settings Tab -->
      <section id="export" class="tab-content">
        <div class="options-container">
          <div class="option-section">
            <h2>Auto Export</h2>
            <div class="option-row">
              <label>
                <input type="checkbox" id="autoExport">
                Enable Auto Export
              </label>
            </div>
            <div class="option-row">
              <label for="exportFormat">Export Format:</label>
              <select id="exportFormat">
                <option value="json">JSON</option>
                <option value="csv">CSV</option>
                <option value="sqlite">SQLite</option>
              </select>
            </div>
            <div class="option-row">
              <label for="exportInterval">Export Interval (minutes):</label>
              <input type="number" id="exportInterval" min="5" max="1440" step="5">
            </div>
            <div class="option-row">
              <label for="exportPath">Export Directory (optional):</label>
              <input type="text" id="exportPath" placeholder="Default downloads directory">
            </div>
          </div>
        </div>
      </section>

      <!-- Data Retention Tab -->
      <section id="retention" class="tab-content">
        <div id="dataPurge"></div>
      </section>

      <!-- Security Settings Tab -->
      <section id="security" class="tab-content">
        <div class="options-container">
          <div class="option-section">
            <h2>Settings Import/Export</h2>
            <div class="option-row">
              <button id="exportSettingsBtn" class="primary-btn">
                Export Settings
              </button>
              <p class="description">Export all settings to a file for backup or transfer</p>
            </div>
            <div class="option-row">
              <input type="file" id="importSettingsFile" accept=".json" style="display: none;">
              <button id="importSettingsBtn" class="secondary-btn">
                Import Settings
              </button>
              <p class="description">Import settings from a previously exported file</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Themes Settings Tab -->
      <section id="themes" class="tab-content">
        <div class="options-container">
          <div class="option-section">
            <h2>Theme Settings</h2>
            <div class="option-row">
              <label for="currentTheme">Current Theme:</label>
              <select id="currentTheme">
                <option value="system">System Preference</option>
                <option value="light">Light</option>
                <option value="dark">Dark</option>
                <option value="highContrast">High Contrast</option>
                <option value="blue">Blue</option>
              </select>
            </div>

            <h3>Available Themes</h3>
            <div class="themes-container">
              <!-- Theme cards will be added dynamically -->
            </div>

            <div class="option-row actions">
              <button id="saveThemeBtn" class="primary-btn">Save Changes</button>
              <button id="resetThemeBtn" class="secondary-btn">Reset to Default</button>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <div id="notification" class="notification"></div>

  <script type="module" src="js/options.js"></script>
</body>

</html>