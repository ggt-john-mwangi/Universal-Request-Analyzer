<!DOCTYPE html>
<html lang="{{ site.lang | default: 'en-US' }}">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    {% seo %}
    <link
      rel="stylesheet"
      href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}"
    />

    <!-- Mermaid.js for diagram rendering -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Initialize Mermaid
        mermaid.initialize({
          startOnLoad: false,
          theme: "default",
          securityLevel: "loose",
          fontFamily: "Arial, sans-serif",
        });

        // Find all code blocks with language-mermaid class (created by Jekyll/Kramdown)
        const mermaidBlocks = document.querySelectorAll('code.language-mermaid, pre.language-mermaid code');
        
        mermaidBlocks.forEach((block, index) => {
          // Get the mermaid code
          const code = block.textContent || block.innerText;
          
          // Create a new div element for Mermaid
          const mermaidDiv = document.createElement('div');
          mermaidDiv.className = 'mermaid';
          mermaidDiv.textContent = code;
          mermaidDiv.id = 'mermaid-' + index;
          
          // Replace the code block with the mermaid div
          const pre = block.closest('pre') || block;
          pre.parentNode.replaceChild(mermaidDiv, pre);
        });

        // Now render all mermaid diagrams
        mermaid.run();
      });
    </script>
    <style>
      /* Style for Mermaid diagrams */
      .mermaid {
        text-align: center;
        margin: 2em 0;
        padding: 1em;
        background: #f8f9fa;
        border-radius: 4px;
        overflow-x: auto;
      }
      .mermaid svg {
        max-width: 100%;
        height: auto;
      }
    </style>
  </head>
  <body>
    <a id="skip-to-content" href="#content">Skip to the content.</a>

    <header class="page-header" role="banner">
      <h1 class="project-name">
        {{ page.title | default: site.title | default:
        site.github.repository_name }}
      </h1>
      <h2 class="project-tagline">
        {{ page.description | default: site.description | default:
        site.github.project_tagline }}
      </h2>
      {% if site.github.is_project_page %}
      <a href="{{ site.github.repository_url }}" class="btn">View on GitHub</a>
      {% endif %} {% if site.show_downloads %}
      <a href="{{ site.github.zip_url }}" class="btn">Download .zip</a>
      <a href="{{ site.github.tar_url }}" class="btn">Download .tar.gz</a>
      {% endif %}
    </header>

    <main id="content" class="main-content" role="main">
      {{ content }}

      <footer class="site-footer">
        {% if site.github.is_project_page %}
        <span class="site-footer-owner"
          ><a href="{{ site.github.repository_url }}"
            >{{ site.github.repository_name }}</a
          >
          is maintained by
          <a href="{{ site.github.owner_url }}">{{ site.github.owner_name }}</a
          >.</span
        >
        {% endif %}
        <span class="site-footer-credits"
          >This page was generated by
          <a href="https://pages.github.com">GitHub Pages</a>.</span
        >
      </footer>
    </main>
  </body>
</html>
